<p data-pid="y6rQsDql">正方形网格上衡量距离有几种常用的方式：</p><p><img src="https://pic1.zhimg.com/v2-58c1da556a979784d91c26a9fcd563fd_720w.jpg?source=b1748391?rss" data-caption="" data-size="normal" data-rawwidth="317" data-rawheight="496" data-watermark="original" data-original-src="v2-58c1da556a979784d91c26a9fcd563fd" data-watermark-src="v2-577179e2fee6934d24169e4ee91e5722" data-private-watermark-src="v2-990f380fed68a984876e53b3bfbe42d3" style="max-width: 400px;"></p><p data-pid="Y7TxrQdF">欧几里得距离对应单位可以万向移动；曼哈顿距离对应单位只能沿上下左右移动；切比雪夫距离对应单位除了上下左右以外，还能斜向45°移动。</p><p data-pid="0aV8Iiuz">「切比雪夫式」移动类似国际象棋里“王”的移动（可以上下左右或斜向移动一格）。在战棋设计中，如果允许玩家操作单位以这种方式移动，看似玩家的选择更多了，但实际上容错率反而会低一些，因为斜向移动的数量会有一个下限。在上图的例子中，从A点移动到B点需要7步，这其中必须包含至少3步斜向移动（可以更多，比如到B左下方再折返回来，但不能更少），此外其他的移动必须竖直向上，否则会使得需要移动的总步数增加。假如玩家操作不慎，比如先向正左方移动了，虽然直观上这么做仍然能缩短与B点的距离，但到达B点的总步数将会增加。</p><p data-pid="OatpBEL7">也可以理解成，相比水平方向的距离，竖直方向的距离更远，那么每一步移动都必须包含竖直方向的分量（进而缩短竖直方向距离）：</p><p><img src="https://pica.zhimg.com/v2-f9ebdeb6edf88272ef126497aa02c88a_720w.png?source=b1748391?rss" data-caption="切比雪夫式移动的几条路径" data-size="normal" data-rawwidth="372" data-rawheight="330" data-watermark="original" data-original-src="v2-f9ebdeb6edf88272ef126497aa02c88a" data-watermark-src="v2-a7d057b82f72a5bd883f20c3f4d82900" data-private-watermark-src="v2-9cab29468de622f6976df6404f46025f" style="max-width: 400px;"></p><p data-pid="CDesb1Kz">另外，切比雪夫式移动在画面表现上有时会觉得怪怪的。比如A点周围围满了其他单位，只有左上角是空地。从A点向左上角移动，单位仿佛就要从两个方格对角位置的缝隙里“挤”过去。如果单位本身比较庞大，占据了格子的大部分面积，而设定又是地面单位（比如方形的坦克），那它挤过去的时候就要碾过其他单位了。</p><p data-pid="wNZmKN_2">「曼哈顿式」移动比较直观，也方便对应键盘、手柄的方向按键。容错率相比切比雪夫式移动稍高一些。只要玩家是在缩短与目的地的距离，不刻意绕弯路，总的移动步数是恒定的：</p><p><img src="https://pic1.zhimg.com/v2-dd682ecc7a2f1ca8b2df8cdeaeabc958_720w.png?source=b1748391?rss" data-caption="曼哈顿式移动的几条路径" data-size="normal" data-rawwidth="400" data-rawheight="329" data-watermark="original" data-original-src="v2-dd682ecc7a2f1ca8b2df8cdeaeabc958" data-watermark-src="v2-ed861a2dd259b47b39e52d22b2a10580" data-private-watermark-src="v2-6eedade61501ab8f71ab63c16d744d1d" style="max-width: 400px;"></p><p data-pid="8cuUfsAj">「欧几里得式」移动在战棋中比较少，更多的是出现在单位并非固定于整数格点的即时战略游戏中，因为中途它会经过许多非整数格点的位置，操作方式也更多是使用鼠标直接点击目的地。在这种方式里，单位走了少许弯路，只要大方向差别不大，总的移动距离只会少量增加：</p><p><img src="https://pic1.zhimg.com/v2-9ae43df5c53d1911adc8919aa4fb0d28_720w.jpg?source=b1748391?rss" data-caption="" data-size="normal" data-rawwidth="591" data-rawheight="910" data-watermark="original" data-original-src="v2-9ae43df5c53d1911adc8919aa4fb0d28" data-watermark-src="v2-ee95c82adac7589f45af7bcb7f345a9d" data-private-watermark-src="v2-23e13e3d796b54583c670d318edf504d" style="max-width: 400px;"></p><p data-pid="Z3cNIWiQ">几种移动方式下，相同距离的目的地形成的「等距线」也不一样：</p><p><img src="https://pic3.zhimg.com/v2-7a5f458f70805b78fbea8db4b5f66fa3_720w.jpg?source=b1748391?rss" data-caption="曼哈顿距离等距线" data-size="normal" data-rawwidth="741" data-rawheight="736" data-watermark="original" data-original-src="v2-7a5f458f70805b78fbea8db4b5f66fa3" data-watermark-src="v2-2b190dee0c79096b1abf123a97984606" data-private-watermark-src="v2-56f292fdc71763ede1d3ca925ea2c925" style="max-width: 400px;"></p><p data-pid="EwvXNIio">曼哈顿距离可以将横纵坐标差值相加得到，计算简单。但单位向斜方向移动的能力显得太弱了。如图中突出显示的位置，需要8步才能到达，但直观看上去它和原点的距离完全没有那么远。</p><p><img src="https://picx.zhimg.com/v2-8995c0a557ea9a8f243cf8460dd3d088_720w.jpg?source=b1748391?rss" data-caption="切比雪夫距离等距线" data-size="normal" data-rawwidth="732" data-rawheight="741" data-watermark="original" data-original-src="v2-8995c0a557ea9a8f243cf8460dd3d088" data-watermark-src="v2-e692944fb8ebd23b68b54e2f2e6dbbec" data-private-watermark-src="v2-aa906d211a9ee17b1f4db0455fe7cb8d" style="max-width: 400px;"></p><p data-pid="MxL_wAag">切比雪夫距离可以取横纵坐标差值的较大值得到，计算也很简单。但单位在斜方向上移动能力又太强了。8步能移动到角落处，直观看上去这里远不止“8格”距离。</p><p><img src="https://pica.zhimg.com/v2-1b37865f133cbde8d81ef3a599cf28d4_720w.jpg?source=b1748391?rss" data-caption="欧几里得距离等距线" data-size="normal" data-rawwidth="739" data-rawheight="743" data-watermark="original" data-original-src="v2-1b37865f133cbde8d81ef3a599cf28d4" data-watermark-src="v2-4c6f8ca19d7fbefabc3f20ce96f4bca8" data-private-watermark-src="v2-217f03fcfe371ce3bed8a92a42b02db7" style="max-width: 400px;"></p><p><img src="https://picx.zhimg.com/v2-d52dca714a21cdaadc7f4fba3ce48b89_720w.jpg?source=b1748391?rss" data-caption="欧几里得距离等距线的另一种形式" data-size="normal" data-rawwidth="740" data-rawheight="738" data-watermark="original" data-original-src="v2-d52dca714a21cdaadc7f4fba3ce48b89" data-watermark-src="v2-3386245a3b72ab863e7924370e5ff0cd" data-private-watermark-src="v2-c49fc286a50e69d4725ef5853bd5150f" style="max-width: 400px;"></p><p data-pid="IA2jlHfU">欧几里得距离算是两者的折中，可以让横纵方向的距离作为直角边，用勾股定理计算得到，计算量稍大一些（涉及开方）。虽然战棋中也可以用，但它又不利于玩家一眼迅速判断两格之间的距离。</p><p data-pid="Ax-xX9Yx">六边形网格在计算机中的坐标表示、距离计算会稍微麻烦一些。可能不得不用分数来表示网格坐标，计算距离也需要单独编写。但六边形比起正方形更接近圆一些，距离显得直观很多，它的等距线总是一圈一圈围着原点向外扩展：</p><p><img src="https://pica.zhimg.com/v2-e6e6d06303ebe8cf24fe04d123267e1f_720w.jpg?source=b1748391?rss" data-caption="" data-size="normal" data-rawwidth="767" data-rawheight="709" data-watermark="original" data-original-src="v2-e6e6d06303ebe8cf24fe04d123267e1f" data-watermark-src="v2-ce1dacab6b026cfa5da822a0ffd6f6bb" data-private-watermark-src="v2-25e4bd6e6f06a899f405569f322f846c" style="max-width: 400px;"></p><p data-pid="iR6chBpu">如今一些战棋游戏似乎更倾向于采用六边形网格，比如太空帝国5，就从前作的正方形网格换成了六边形网格。文明VI、三国志等也是如此。当然也有不少游戏更钟情于正方形网格，算是各有所爱吧。</p><hr><p data-pid="P55UnmoH">有人提到在正方形网格中允许45°斜向移动，但消耗的步数不为整数的情况，比如根号2、1.5之类。我也稍做了些研究，在这里分享一下结果吧。</p><p data-pid="5vsitCbC">以横竖方向上移动消耗1步为准，假设斜向移动消耗的步数是k：</p><p><img src="https://pic3.zhimg.com/v2-bd5273cdecabd2079845958d2d98440b_720w.jpg?source=b1748391?rss" data-caption="" data-size="normal" data-rawwidth="393" data-rawheight="391" data-watermark="original" data-original-src="v2-bd5273cdecabd2079845958d2d98440b" data-watermark-src="v2-9d27a800805fa84a64874e969897d897" data-private-watermark-src="v2-9891076cc2d7c2e47dbbf9f51cc1b0fa" style="max-width: 400px;"></p><p data-pid="gJT8FyDB">k的合理范围是区间[1, 2]。以上图为例：</p><p data-pid="bzHBRUq-">如果k大于2，那么从A点移至C点，走A-B-C的路径比直接A到C更节省步数，就没有必要选后者了。</p><p data-pid="xqPFN-om">如果k小于1，那么从A点移至D点，走A-C-D比A-B-D更节省步数，变成了「沿45°蛇皮走位比直达更快」，也不合理。</p><p data-pid="EwfRQIn2">k越小，表明单位沿斜向移动的能力越强。k=1时就是切比雪夫式移动，而k=2则是曼哈顿式移动。k在(1, 2)范围内意味着「A-C比A-B更远，但比A-B-C拐弯更近」。此时单位移动到某个位置所需的最少步数（两点的距离）可以这样计算得到：</p><p data-pid="i02ljtFF">距离（k） = max(横坐标差值, 纵坐标差值) + (k-1) × min(横坐标差值, 纵坐标差值)</p><p data-pid="mtT3MVsN">曼哈顿式移动，k=2：</p><p data-pid="9z-fItf9">距离（曼哈顿）= max(横坐标差值, 纵坐标差值) + min(横坐标差值, 纵坐标差值)，它等于 横坐标差值+纵坐标差值</p><p data-pid="cJNHfMZH">切比雪夫式移动，k=1：</p><p data-pid="XBq1ICvD">距离（切比雪夫） = max(横坐标差值, 纵坐标差值)</p><p data-pid="zGXlLxOf">根据距离（k）可以画出类似的「等距线」，它是内角随k变化的八边形。k取不同的值，对单位斜方向上的移动能力有显著影响：</p><p><img src="https://pic1.zhimg.com/v2-28e1f43e0bde963b6757990fe6ded457_720w.gif?source=b1748391?rss" data-caption="" data-size="normal" data-rawwidth="837" data-rawheight="791" data-watermark="original" data-original-src="v2-28e1f43e0bde963b6757990fe6ded457" data-watermark-src="" data-private-watermark-src="" style="max-width: 400px;"></p><p data-pid="j08HAkpq">k为根号2时它是正八边形（蜘蛛网有木有），这是允许单位在8个方向移动的情况下最贴近正圆的k值了：</p><p><img src="https://picx.zhimg.com/v2-cc0c19fb8bc1c9e423fa615d975f5933_720w.jpg?source=b1748391?rss" data-caption="" data-size="normal" data-rawwidth="791" data-rawheight="763" data-watermark="original" data-original-src="v2-cc0c19fb8bc1c9e423fa615d975f5933" data-watermark-src="v2-0ca5ccc1eb6d6f00f19fa61778aa8754" data-private-watermark-src="v2-6ffcca0c182f48deefdcbef45ac3a7d9" style="max-width: 400px;"></p><p><img src="https://picx.zhimg.com/v2-496e4c11165d71153894e534a18ed721_720w.jpg?source=b1748391?rss" data-caption="k=根号2" data-size="normal" data-rawwidth="674" data-rawheight="665" data-watermark="original" data-original-src="v2-496e4c11165d71153894e534a18ed721" data-watermark-src="v2-53eabb45392898ac17ad654677062e6c" data-private-watermark-src="v2-bc3be03158fe9522506c28e1037cc911" style="max-width: 400px;"></p><p data-pid="yGzNbEHC">k等于1.5时，八边形在斜方向上再稍收缩一些：</p><p><img src="https://pic1.zhimg.com/v2-84dacd7203b8943854636f41a1c2293e_720w.jpg?source=b1748391?rss" data-caption="" data-size="normal" data-rawwidth="801" data-rawheight="772" data-watermark="original" data-original-src="v2-84dacd7203b8943854636f41a1c2293e" data-watermark-src="v2-fdf3158b5ef731625cad73af8130df8b" data-private-watermark-src="v2-2ebf75241126402a7a9632f7ee46a93a" style="max-width: 400px;"></p><p><img src="https://pic4.zhimg.com/v2-6502bb75cc89da469222265fe5568058_720w.jpg?source=b1748391?rss" data-caption="k=1.5" data-size="normal" data-rawwidth="664" data-rawheight="664" data-watermark="original" data-original-src="v2-6502bb75cc89da469222265fe5568058" data-watermark-src="v2-51c06030ffd5d16f2a7a135d5a9155a7" data-private-watermark-src="v2-cd32512d19034ce330f95cc052092592" style="max-width: 400px;"></p><p data-pid="cEaKNaYb">这些不为整数的k值，让斜向的移动更符合对距离的直观感受（更接近欧几里得距离）。在游戏中可能要考虑用特别的方法处理，比如玩家的“移动力”不再是整数，而是一个模糊数值的“移动力条”；或者对两点距离舍入或向上/向下取整等等。</p><hr><p data-pid="ugpsqXic">有意思的是，《红色警戒2》虽然是即时战略，但也用了正方形网格，只不过对它进行了一些旋转变形，让玩家的视角更像是向下45°俯瞰战场：</p><p><img src="https://pic4.zhimg.com/v2-af336e7cafdaded69438c69469950a20_720w.jpg?source=b1748391?rss" data-caption="" data-size="normal" data-rawwidth="1093" data-rawheight="358" data-watermark="original" data-original-src="v2-af336e7cafdaded69438c69469950a20" data-watermark-src="v2-2bf103a14a812f7cf609a6dc90095dba" data-private-watermark-src="v2-2ea7ab64c68c16bea1a4906a8b036622" style="max-width: 400px;"></p><p><img src="https://pica.zhimg.com/v2-92687cddb9388687bb6796bbca7aa3e0_720w.jpg?source=b1748391?rss" data-caption="挤在一起的坦克" data-size="normal" data-rawwidth="396" data-rawheight="242" data-watermark="original" data-original-src="v2-92687cddb9388687bb6796bbca7aa3e0" data-watermark-src="v2-ef9f10d0e228f6a02de85bbb25cc59f3" data-private-watermark-src="v2-9ab34d17317b787736ffdfc53d3fcfc7" style="max-width: 400px;"></p><p data-pid="fFsxV0kH">经过旋转后，网格内的斜向移动在画面上体现为横竖方向移动。而网格又在竖方向上压缩了，结果就是，坦克上下走的时候感觉很慢，水平方向上跑得飞起……</p>
<br><br>
来源：知乎 www.zhihu.com<br>
    
作者：<a href="http://www.zhihu.com/people/cigarmemr?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=author">中等难度的贪吃蛇</a><br>
            
<br>
【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。
        <a href="http://daily.zhihu.com?utm_source=rssyanwenzi&utm_campaign=tuijian&utm_medium=rssnormal" target="_blank">点击下载</a><br>
<br>
此问题还有 <a href="http://www.zhihu.com/question/53428327/answer/2597348774?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title" target="_blank">20 个回答，查看全部。</a><br>
                延伸阅读：<br>
<a href="http://www.zhihu.com/question/358329087?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title" target="_blank">哪些战棋类游戏系统设计的是不错的？</a><br>
            
<a href="http://www.zhihu.com/question/530699628?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title" target="_blank">战棋类游戏中有哪些强大到近乎于 BUG 的技能？</a><br>
            